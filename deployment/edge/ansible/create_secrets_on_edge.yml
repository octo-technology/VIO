- name: "Create secret on edge"
  hosts: edge_1
  tasks:
  - shell:
      kubectl create secret generic service-account-credentials \
      --namespace=vio \
      --from-file=key.json="{{ EDGE_ORCHESTRATOR_SA }}"

  - shell:
      kubectl create secret docker-registry artifact-registry \
      --namespace=vio \
      --docker-server=https://europe-west1-docker.pkg.dev \
      --docker-email=tf-service-account@acn-gcp-octo-sas.iam.gserviceaccount.com \
      --docker-username=_json_key \
      --docker-password="$(cat "{{ REGISTERY_SA }}")"

  - shell:
      kubectl create secret docker-registry github-registry \
      --namespace=vio \
      --docker-server=ghcr.io \
      --docker-username="{{ GITHUB_USERNAME }}" \
      --docker-password="{{ GITHUB_TOKEN }}"
